{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "markdown-editor",
  "title": "Markdown Editor",
  "description": "A simple Markdown Editor component",
  "dependencies": [
    "lucide-react",
    "react-markdown",
    "remark-gfm",
    "react-syntax-highlighter",
    "@rasenganjs/theme"
  ],
  "registryDependencies": [
    "button",
    "card"
  ],
  "files": [
    {
      "path": "src/registry/nindo/editors/markdown-editor.tsx",
      "content": "import React, { useState, useCallback, useRef, useEffect, useMemo, ComponentProps } from 'react';\nimport { Card } from \"@/components/common/ui/card\";\nimport { Button } from '@/components/common/ui/button';\nimport { Bold, Braces, CheckCircle2, CodeXml, Copy, Edit2, Eye, GalleryHorizontal, GalleryVertical, Heading1, Heading2, Heading3, Italic, Link2, Quote, Redo2, SquareSplitHorizontal, Undo2 } from 'lucide-react';\nimport { cn } from '@/lib/utils';\nimport Markdown from 'react-markdown';\nimport remarkGfm from 'remark-gfm';\nimport {Prism as SyntaxHighlighter} from 'react-syntax-highlighter'\nimport { oneDark, oneLight } from 'react-syntax-highlighter/dist/esm/styles/prism'\nimport { useTheme } from '@rasenganjs/theme';\n\n// ============================================================================\n// TYPES & INTERFACES\n// ============================================================================\n\ntype BlockType = 'paragraph' | 'heading' | 'code' | 'quote' | 'list' | 'image';\ntype ViewMode = 'edit' | 'preview' | 'split';\ntype Orientation = 'horizontal' | 'vertical';\n\ninterface Block {\n  id: string;\n  type: BlockType;\n  level?: number;\n  startOffset: number;\n  endOffset: number;\n  content: string;\n}\n\ninterface SelectionState {\n  start: number;\n  end: number;\n}\n\ninterface ToolbarAction {\n  id: string;\n  label: string;\n  icon: React.ReactNode;\n  shortcut?: string;\n  handler: (content: string, selection: SelectionState) => {\n    content: string;\n    selection: SelectionState;\n  };\n}\n\n// ============================================================================\n// MARKDOWN PARSING UTILITIES\n// ============================================================================\n\nconst parseBlocks = (content: string): Block[] => {\n  const lines = content.split('\\n');\n  const blocks: Block[] = [];\n  let offset = 0;\n\n  lines.forEach((line, idx) => {\n    const lineLength = line.length + 1;\n    const trimmed = line.trim();\n    \n    let block: Block = {\n      id: `block-${idx}`,\n      type: 'paragraph',\n      startOffset: offset,\n      endOffset: offset + lineLength - 1,\n      content: line\n    };\n\n    const headingMatch = trimmed.match(/^(#{1,6})\\s/);\n    if (headingMatch) {\n      block.type = 'heading';\n      block.level = headingMatch[1].length;\n    } else if (trimmed.startsWith('```')) {\n      block.type = 'code';\n    } else if (trimmed.startsWith('>')) {\n      block.type = 'quote';\n    } else if (trimmed.match(/^[-*+]\\s/) || trimmed.match(/^\\d+\\.\\s/)) {\n      block.type = 'list';\n    } else if (trimmed.match(/^!\\[.*\\]\\(.*\\)/)) {\n      block.type = 'image';\n    }\n\n    blocks.push(block);\n    offset += lineLength;\n  });\n\n  return blocks;\n};\n\nconst getCurrentBlock = (blocks: Block[], cursorPos: number): Block | null => {\n  return blocks.find(b => cursorPos >= b.startOffset && cursorPos <= b.endOffset) || null;\n};\n\nconst mappingBlockToAction = (block: BlockType, level?: number): ToolbarAction[\"id\"] => {\n  switch (block) {\n    case \"heading\": {\n      return `h${level ? level : 0}`;\n    }\n    case 'code': return 'code-block'\n    case 'list': return \"list\";\n    case 'quote': return \"quote\";\n\n    default: return \"\"\n  }\n}\n\n// ============================================================================\n// FORMATTING UTILITIES\n// ============================================================================\n\nconst wrapSelection = (\n  content: string,\n  selection: SelectionState,\n  before: string,\n  after: string = before\n): { content: string; selection: SelectionState } => {\n  const { start, end } = selection;\n  const selectedText = content.slice(start, end);\n  \n  const newContent = \n    content.slice(0, start) + \n    before + selectedText + after + \n    content.slice(end);\n  \n  return {\n    content: newContent,\n    selection: {\n      start: start + before.length,\n      end: end + before.length\n    }\n  };\n};\n\nconst replaceLinePrefix = (\n  content: string,\n  selection: SelectionState,\n  prefix: string\n): { content: string; selection: SelectionState } => {\n  const lines = content.split('\\n');\n  let currentPos = 0;\n  let targetLineIdx = 0;\n\n  for (let i = 0; i < lines.length; i++) {\n    const lineLength = lines[i].length + 1;\n    if (selection.start < currentPos + lineLength) {\n      targetLineIdx = i;\n      break;\n    }\n    currentPos += lineLength;\n  }\n\n  lines[targetLineIdx] = lines[targetLineIdx].replace(/^#{1,6}\\s|^>\\s|^[-*+]\\s|^\\d+\\.\\s/, '');\n  \n  if (prefix) {\n    lines[targetLineIdx] = prefix + ' ' + lines[targetLineIdx];\n  }\n\n  const newContent = lines.join('\\n');\n  return {\n    content: newContent,\n    selection: { ...selection }\n  };\n};\n\n// ============================================================================\n// TOOLBAR ACTIONS\n// ============================================================================\n\nconst createToolbarActions = (): ToolbarAction[] => [\n  {\n    id: 'bold',\n    label: 'Bold',\n    icon: <Bold />,\n    shortcut: '⌘B',\n    handler: (content, selection) => wrapSelection(content, selection, '**')\n  },\n  {\n    id: 'italic',\n    label: 'Italic',\n    icon: <Italic />,\n    shortcut: '⌘I',\n    handler: (content, selection) => wrapSelection(content, selection, '_')\n  },\n  {\n    id: 'code',\n    label: 'Inline Code',\n    icon: <CodeXml />,\n    handler: (content, selection) => wrapSelection(content, selection, '`')\n  },\n  {\n    id: 'link',\n    label: 'Link',\n    icon: <Link2 />,\n    shortcut: '⌘K',\n    handler: (content, selection) => {\n      const selectedText = content.slice(selection.start, selection.end) || 'link text';\n      const linkMarkdown = `[${selectedText}](url)`;\n      const newContent = \n        content.slice(0, selection.start) + \n        linkMarkdown + \n        content.slice(selection.end);\n      \n      return {\n        content: newContent,\n        selection: {\n          start: selection.start + selectedText.length + 3,\n          end: selection.start + selectedText.length + 6\n        }\n      };\n    }\n  },\n  {\n    id: 'h1',\n    label: 'Heading 1',\n    icon: <Heading1 />,\n    handler: (content, selection) => replaceLinePrefix(content, selection, '#')\n  },\n  {\n    id: 'h2',\n    label: 'Heading 2',\n    icon: <Heading2 />,\n    handler: (content, selection) => replaceLinePrefix(content, selection, '##')\n  },\n  {\n    id: 'h3',\n    label: 'Heading 3',\n    icon: <Heading3 />,\n    handler: (content, selection) => replaceLinePrefix(content, selection, '###')\n  },\n  {\n    id: 'quote',\n    label: 'Quote',\n    icon: <Quote />,\n    handler: (content, selection) => replaceLinePrefix(content, selection, '>')\n  },\n  {\n    id: 'code-block',\n    label: 'Code Block',\n    icon: <Braces />,\n    handler: (content, selection) => {\n      const before = '```\\n';\n      const after = '\\n```';\n      return wrapSelection(content, selection, before, after);\n    }\n  }\n];\n\n// ============================================================================\n// HOOKS\n// ============================================================================\n\nconst useEditor = (initialContent: string = '') => {\n  const [content, setContent] = useState(initialContent);\n  const [selection, setSelection] = useState<SelectionState>({ start: 0, end: 0 });\n  const [history, setHistory] = useState<string[]>([initialContent]);\n  const [historyIndex, setHistoryIndex] = useState(0);\n\n  const blocks = useMemo(() => parseBlocks(content), [content]);\n  const currentBlock = useMemo(() => getCurrentBlock(blocks, selection.start), [blocks, selection]);\n\n  const updateContent = useCallback((newContent: string, newSelection?: SelectionState) => {\n    setContent(newContent);\n    if (newSelection) setSelection(newSelection);\n    \n    setHistory(prev => [...prev.slice(0, historyIndex + 1), newContent]);\n    setHistoryIndex(prev => prev + 1);\n  }, [historyIndex]);\n\n  const undo = useCallback(() => {\n    if (historyIndex > 0) {\n      setHistoryIndex(prev => prev - 1);\n      setContent(history[historyIndex - 1]);\n    }\n  }, [history, historyIndex]);\n\n  const redo = useCallback(() => {\n    if (historyIndex < history.length - 1) {\n      setHistoryIndex(prev => prev + 1);\n      setContent(history[historyIndex + 1]);\n    }\n  }, [history, historyIndex]);\n\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      const isUndo =\n        (e.metaKey || e.ctrlKey) &&\n        !e.shiftKey &&\n        e.key.toLowerCase() === 'z';\n\n      const isRedo =\n        ((e.metaKey || e.ctrlKey) && e.shiftKey && e.key.toLowerCase() === 'z')\n\n      if (isUndo) {\n        e.preventDefault();\n        undo();\n      }\n\n      if (isRedo) {\n        e.preventDefault();\n        redo();\n      }\n\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [undo, redo]);\n\n  return {\n    content,\n    selection,\n    blocks,\n    currentBlock,\n    updateContent,\n    setSelection,\n    undo,\n    redo,\n    canUndo: historyIndex > 0,\n    canRedo: historyIndex < history.length - 1\n  };\n};\n\nconst useEditorShortcuts = (\n  textareaRef: React.RefObject<HTMLTextAreaElement | null>,\n  updateContent: (content: string, selection?: SelectionState) => void\n) => {\n  useEffect(() => {\n    const textarea = textareaRef?.current;\n    if (!textarea) return;\n\n    const handleKeyDown = (e: KeyboardEvent) => {\n      const { value, selectionStart, selectionEnd } = textarea;\n      const selection = { start: selectionStart || 0, end: selectionEnd || 0 };\n\n\n      const pairs: Record<string, string> = {\n        '**': '**',\n        '_': '_',\n        '`': '`',\n        '[': ']',\n        '(': ')',\n        '{': '}',\n        '\"': '\"',\n        \"'\": \"'\"\n      };\n\n      // Handling pairs\n      if (pairs[e.key] && selectionStart === selectionEnd) {\n        e.preventDefault();\n        const before = value.slice(0, selectionStart);\n        const after = value.slice(selectionStart);\n        const newContent = before + e.key + pairs[e.key] + after;\n        updateContent(newContent, {\n          start: selectionStart + e.key.length,\n          end: selectionStart + e.key.length\n        });\n        return;\n      }\n\n      // Handling Tab\n      if (e.key === 'Tab') {\n        e.preventDefault();\n\n        const before = value.slice(0, selectionStart);\n        const after = value.slice(selectionEnd);\n        const newValue = before + '  ' + after;\n        const cursorPos = selectionStart + 2;\n\n        updateContent(newValue);\n\n        // Restore cursor AFTER render\n        requestAnimationFrame(() => {\n          textarea.setSelectionRange(cursorPos, cursorPos);\n        });\n      }\n\n      // Handling action shorcuts like ctrl+b, ctrl+i\n      if (e.key.toLowerCase() === \"b\") {\n        const before = value.slice(0, selectionStart);\n        const after = value.slice(selectionEnd);\n        const inBetween = value.slice(selectionStart, selectionEnd);\n        \n        const newValue = `${before}**${inBetween}**${after}`;\n        \n        if (inBetween) {\n          e.preventDefault();\n\n          updateContent(newValue);\n  \n          // Restore cursor AFTER render\n          requestAnimationFrame(() => {\n            textarea.setSelectionRange(selectionStart + 2, selectionEnd + 2); \n          });\n        }\n      }\n\n      if (e.key.toLowerCase() === \"i\") {\n        const before = value.slice(0, selectionStart);\n        const after = value.slice(selectionEnd);\n        const inBetween = value.slice(selectionStart, selectionEnd);\n        \n        const newValue = `${before}_${inBetween}_${after}`;\n        \n        if (inBetween) {\n          e.preventDefault();\n\n          updateContent(newValue);\n  \n          // Restore cursor AFTER render\n          requestAnimationFrame(() => {\n            textarea.setSelectionRange(selectionStart + 1, selectionEnd + 1);\n          });\n        }\n      }\n    };\n\n    textarea.addEventListener('keydown', handleKeyDown, true);\n    return () => textarea.removeEventListener('keydown', handleKeyDown, true);\n  }, [textareaRef, updateContent]);\n};\n\n// ============================================================================\n// COMPONENTS\n// ============================================================================\n\nconst EditorToolbar: React.FC<{\n  actions: ToolbarAction[];\n  onAction: (action: ToolbarAction) => void;\n  currentBlock: Block | null;\n  undo: () => void;\n  redo: () => void;\n  canUndo: boolean;\n  canRedo: boolean;\n  mode?: ViewMode;\n  setMode?: (mode: ViewMode) => void;\n\torientation?: Orientation,\n\tsetOrientation?: (orientation: Orientation) => void\n}> = ({ actions, onAction, currentBlock, undo, redo, canUndo, canRedo, mode, setMode, orientation = \"horizontal\", setOrientation }) => {\n  return (\n    <div className=\"flex items-center justify-between gap-2 h-[50px] px-2 py-3 bg-background border-b border-border overflow-x-auto overflow-y-hidden\">\n      <div className='flex items-center gap-2'>\n        <div className=\"flex items-center gap-1\">\n          {actions.slice(0, 4).map(action => (\n            <Button\n              key={action.id}\n              onClick={() => onAction(action)}\n              size={\"icon\"}\n            \tvariant={mappingBlockToAction(currentBlock?.type || 'paragraph', currentBlock?.level) === action.id ? \"default\" : \"outline\"}\n              className={\"text-foreground/70\"}\n              title={`${action.label}${action.shortcut ? ` (${action.shortcut})` : ''}`}\n              disabled={mode === 'preview'}\n            >\n              {action.icon}\n            </Button>\n          ))}\n        </div>\n        <div className=\"w-px h-6 bg-border\" />\n        <div className=\"flex items-center gap-1\">\n          {actions.slice(4).map(action => (\n            <Button\n              key={action.id}\n              onClick={() => onAction(action)}\n              size={\"icon\"}\n              variant={mappingBlockToAction(currentBlock?.type || 'paragraph', currentBlock?.level) === action.id ? \"default\" : \"outline\"}\n              className={mappingBlockToAction(currentBlock?.type || 'paragraph', currentBlock?.level) === action.id ? \"text-primary-foreground\" : \"text-foreground/70\"}\n              title={action.label}\n              disabled={mode === 'preview'}\n            >\n              {action.icon}\n            </Button>\n          ))}\n        </div>\n      </div>\n\n      <div className='flex items-center gap-2'>\n\t\t\t\t<div className='flex items-center gap-1'>\n          <Button\n            size={\"icon\"} \n            onClick={() => setOrientation && setOrientation(orientation === \"horizontal\" ? \"vertical\" : \"horizontal\")}\n            variant={\"outline\"} \n            title=\"Edit\"\n            disabled={!setOrientation}\n          >\n            {\n\t\t\t\t\t\t\torientation === \"horizontal\" ? <GalleryHorizontal /> : <GalleryVertical />\n\t\t\t\t\t\t}\n          </Button>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"w-px h-6 bg-border\" />\n        <div className='flex items-center gap-1'>\n          <Button\n            size={\"icon\"} \n            onClick={() => setMode && setMode(\"edit\")}\n            variant={mode === \"edit\" ? \"default\" : \"outline\"} \n            title=\"Edit\"\n            disabled={!setMode}\n          >\n            <Edit2 />\n          </Button>\n          <Button\n            size={\"icon\"} \n            onClick={() => setMode && setMode(\"split\")}\n            variant={mode === \"split\" ? \"default\" : \"outline\"} \n            title=\"Split\"\n            disabled={!setMode}\n          >\n            <SquareSplitHorizontal />\n          </Button>\n          <Button\n            size={\"icon\"} \n            onClick={() => setMode && setMode(\"preview\")}\n            variant={mode === \"preview\" ? \"default\" : \"outline\"} \n            title=\"Preview\"\n            disabled={!setMode}\n          >\n            <Eye />\n          </Button>\n        </div>\n        <div className=\"w-px h-6 bg-border\" />\n        <Button\n          onClick={undo}\n          disabled={!canUndo}\n          size={\"icon\"} \n          variant={\"ghost\"} \n          className=\"text-foreground/70\"\n          title=\"Undo (⌘Z)\"\n        >\n          <Undo2 />\n        </Button>\n        <Button\n          onClick={redo}\n          disabled={!canRedo}\n          size={\"icon\"} \n          variant={\"ghost\"} \n          className=\"text-foreground/70\"\n          title=\"Redo (⌘⇧Z)\"\n        >\n          <Redo2 />\n        </Button>\n      </div>\n    </div>\n  );\n};\n\nconst EditorCore: React.FC<{\n  content: string;\n  onChange: (content: string) => void;\n  onSelectionChange: (selection: SelectionState) => void;\n  textareaRef: React.RefObject<HTMLTextAreaElement | null>;\n  placeholder?: string;\n  className?: ComponentProps<'div'>['className'];\n  children?: React.ReactNode;\n}> = ({ content, onChange, onSelectionChange, textareaRef, placeholder, className, children }) => {\n  const handleChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    onChange(e.target.value);\n  };\n\n  const handleSelect = () => {\n    if (textareaRef.current) {\n      onSelectionChange({\n        start: textareaRef.current.selectionStart,\n        end: textareaRef.current.selectionEnd\n      });\n    }\n  };\n\n  return (\n    <div className={cn(\"relative flex flex-col flex-1\", className)}>\n      {children}\n      <textarea\n        aria-label=\"Markdown editor\"\n        aria-describedby=\"Nindo Markdown Editor\"\n        ref={textareaRef}\n        value={content}\n        onChange={handleChange}\n        onSelect={handleSelect}\n        onClick={handleSelect}\n        onKeyUp={handleSelect}\n        placeholder={placeholder || \"Start writing your markdown...\"}\n        spellCheck={false}\n        className=\"flex-1 p-8 text-foreground border-0 font-mono text-[15px] leading-relaxed resize-none outline-none placeholder:text-foreground/70\"\n      />\n    </div>\n  );\n};\n\nconst MarkdownPreview: React.FC<{ content: string, dark?: boolean }> = ({ content, dark = false }) => {\n  return (\n    <div className=\"flex-1 overflow-y-auto bg-muted/30\">\n      <div className=\"p-8 max-w-3xl mx-auto\">\n        {content ? (\n          <Markdown \n            remarkPlugins={[remarkGfm]} \n            components={{\n              p: ({ children, ...props }) => <p {...props} className=\"text-sm font-medium leading-relaxed [&:not(:first-child)]:mt-6 text-foreground/80\">{children}</p>,\n              a: ({ children, ...props }) => <a {...props} className=\"text-primary font-semibold underline underline-offset-4 cursor-pointer\">{children}</a>,\n              h1: ({ children, ...props }) => <h1 {...props} className=\"sm:text-3xl text-4xl font-semibold mt-4 mb-5 text-foreground\">{children}</h1>,\n              h2: ({ children, ...props }) => <h2 {...props} className=\"text-xl font-medium mt-8 mb-3 text-foreground\">{children}</h2>,\n              h3: ({ children, ...props }) => <h3 {...props} className=\"text-lg font-medium mt-8 mb-3 text-foreground\">{children}</h3>,\n              h4: ({ children, ...props }) => <h4 {...props} className=\"text-md font-medium mt-8 mb-3 text-foreground\">{children}</h4>,\n              h5: ({ children, ...props }) => <h5 {...props} className=\"text-md font-medium mt-8 mb-3 text-foreground\">{children}</h5>,\n              h6: ({ children, ...props }) => <h6 {...props} className=\"text-md font-medium mt-8 mb-3 text-foreground\">{children}</h6>,\n              ol: ({ children, ...props }) => <ol {...props} className=\"my-6 ml-6 list-decimal\">{children}</ol>,\n              ul: ({ children, ...props }) => <ul {...props} className=\"my-6 ml-6 list-decimal list-inside\">{children}</ul>,\n              li: ({ children, ...props }) => <li {...props} className=\"mt-2 text-sm font-medium text-foreground/80\">{children}</li>,\n\t\t\t\t\t\t\tblockquote: (props) => <blockquote {...props} className=\"inline-block pl-2 border-l-4 border-l-border\"></blockquote>,\n              code(props) {\n                const {children, className, node, ...rest} = props\n                const match = /language-(\\w+)/.exec(className || '')\n\n                const [isCopied, setIsCopied] = useState(false);\n\n                const handleCopy = () => {\n                  navigator.clipboard.writeText(String(children));\n                  setIsCopied(true);\n                  setTimeout(() => setIsCopied(false), 2000);\n                }\n                \n                return match ? (\n                  <div className='border border-border rounded-md overflow-hidden my-4'>\n                    <div className=\"flex items-center justify-between px-2 py-2 h-[40px] text-xs font-medium text-foreground/50 border-b border-b-border bg-muted/40\">\n                      <span>{match[1]}</span>\n\n                      <span>\n                        <Button\n                          size=\"icon\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='size-6'\n                          variant=\"ghost\"\n                          onClick={handleCopy}\n                        >\n                          { isCopied ? <CheckCircle2 className=\"size-3\" /> : <Copy className=\"size-3\" /> }\n                        </Button>\n                      </span>\n                    </div>\n                    <SyntaxHighlighter\n                      {...rest as any}\n                      PreTag=\"div\"\n                      children={String(children).replace(/\\n$/, '')}\n                      showLineNumbers\n                      language={match[1]}\n                      style={{margin: 0, ...(dark ? oneDark : oneLight)}}\n                      customStyle={{ margin: 0, borderRadius: 0, maxHeight: \"500px\" }}\n                      className=\"text-sm\"\n                    ></SyntaxHighlighter>\n                  </div>\n                ) : (\n                  <code {...rest} className={cn(\"bg-muted relative rounded-md px-[0.3rem] py-[0.2rem] font-mono text-[0.9rem] break-words outline-none\", className)}>\n                    {children}\n                  </code>\n                )\n              }\n            }}\n          >\n            {content}\n          </Markdown>\n        ) : (\n          <p className=\"text-muted-foreground text-center mt-0 italic\">Preview will appear here...</p>\n        )}\n      </div>\n    </div>\n  );\n};\n\n// ============================================================================\n// MAIN EDITOR COMPONENT\n// ============================================================================\n\nconst MarkdownEditor = ({\n  defaultContent = \"\",\n  onChangeContent,\n\tclassName\n}: { defaultContent?: string, onChangeContent?: (content: string) => void, className?: ComponentProps<\"div\">[\"className\"] }) => {\n\tconst { isDark } = useTheme();\n\n\tconst textareaRef = useRef<HTMLTextAreaElement | null>(null);\n\n\tconst [mode, setMode] = useState<ViewMode>(\"split\");\n\tconst [orientation, setOrientation] = useState<Orientation>(\"horizontal\");\n\n\tconst toolbarActions = createToolbarActions();\n\n\tconst {\n\t\tcontent,\n\t\tselection,\n\t\tcurrentBlock,\n\t\tupdateContent,\n\t\tsetSelection,\n\t\tundo,\n\t\tredo,\n\t\tcanUndo,\n\t\tcanRedo\n\t} = useEditor(defaultContent || \"\");\n\tuseEditorShortcuts(textareaRef, updateContent);\n\n\tconst handleToolbarAction = useCallback((action: ToolbarAction) => {\n\t\tconst result = action.handler(content, selection);\n\t\tupdateContent(result.content, result.selection);\n\n    if (onChangeContent) {\n      onChangeContent(result.content);\n    }\n\t\t\n\t\tsetTimeout(() => {\n\t\t\tif (textareaRef.current) {\n        textareaRef.current.setSelectionRange(result.selection.start, result.selection.end);\n\t\t\t\ttextareaRef.current.focus();\n\t\t\t}\n\t\t}, 0);\n\t}, [content, selection, updateContent]);\n\n\treturn (\n\t\t<Card className={cn(\"flex h-full gap-0 shadow-none p-0 overflow-hidden\", className)}>\n\t\t\t<Editor.Toolbar\n\t\t\t\tactions={toolbarActions}\n\t\t\t\tonAction={(action) => handleToolbarAction(action)}\n\t\t\t\tcurrentBlock={currentBlock}\n\t\t\t\tundo={undo}\n\t\t\t\tredo={redo}\n\t\t\t\tcanUndo={canUndo}\n\t\t\t\tcanRedo={canRedo}\n\t\t\t\tmode={mode}\n\t\t\t\tsetMode={setMode}\n\t\t\t\torientation={orientation}\n\t\t\t\tsetOrientation={setOrientation}\n\t\t\t/>\n\n\t\t\t<div className={cn(\"relative w-full h-full min-h-[400px] flex gap-2 p-2\", orientation === \"horizontal\" ? \"flex-row\": \"flex-col\")}>\n\t\t\t\t{\n\t\t\t\t\t(mode === \"edit\" || mode === \"split\") && (\n\t\t\t\t\t\t<Card className={cn(\"flex gap-4 shadow-none w-full p-0 overflow-auto\", (orientation === \"vertical\" && mode === \"split\") ? \"h-[50%]\": \"h-full\")}>\n\t\t\t\t\t\t\t<Editor.Core \n\t\t\t\t\t\t\t\tcontent={content}\n\t\t\t\t\t\t\t\tonChange={updateContent}\n\t\t\t\t\t\t\t\tonSelectionChange={setSelection}\n\t\t\t\t\t\t\t\ttextareaRef={textareaRef}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Card>\n\t\t\t\t\t)\n\t\t\t\t}\n\n\t\t\t\t{\n\t\t\t\t\t(mode === \"preview\" || mode === \"split\") && (\n\t\t\t\t\t\t<Card className={cn(\"flex gap-4 shadow-none w-full  p-0 overflow-auto\", (orientation === \"vertical\" && mode === \"split\") ? \"h-1/2\": \"h-full\")}>\n\t\t\t\t\t\t\t<Editor.Preview content={content} dark={isDark} />\n\t\t\t\t\t\t</Card>\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t</div>\n\n\t\t\t<div className=\"flex justify-end gap-6 px-6 py-2 bg-background border-t border-border text-xs text-foreground/70\">\n        <span className=\"flex items-center\">\n          {currentBlock ? `${currentBlock.type}${currentBlock.level ? ` (H${currentBlock.level})` : ''}` : 'paragraph'}\n        </span>\n        <span className=\"flex items-center\">\n          {content.split('\\n').length} lines · {content.length} chars\n        </span>\n      </div>\n\t\t</Card>\n\t)\n}\n\nconst Editor = {\n  Core: EditorCore,\n  Toolbar: EditorToolbar,\n  Preview: MarkdownPreview\n}\n\nexport {\n  Editor,\n  MarkdownEditor,\n  useEditor,\n  useEditorShortcuts,\n  createToolbarActions,\n  type ToolbarAction,\n  type ViewMode,\n  type Orientation,\n  type Block\n};\n",
      "type": "registry:component"
    }
  ],
  "type": "registry:block"
}